<!-- include Head html -->
<%- include('../../partials/head') %>

<main>
    <!-- include navbar -->
    <%- include('../../partials/navbar') %>
        <section class="container psr-4rem">

            <div class="card">
                <header class="card-header">
                    <h1 class="fw-400">Editar Artigo</h1>
                </header>
                <div class="card-body">
                    <form action="/articles/update" method="POST">
                        <input type="hidden" value="<%= article.id %> " name="id">
                        <label for="title">Título do artigo</label>
                        <input class="form-control material__input" type="text" name="title" id="title" value="<%= article.title%>">
                        <label for="title">Descrição:</label>
                        <textarea class="form-control material__border" name="body" id="article"></textarea>

                        <select class="form-control" name="categories" id="categories">

                            <% categories.forEach( category =>  { %>

                                <% if( category.id == article.categoryId){ %>

                                    <option value="<%= category.id  %> selected"><%= category.title%></option>
                                
                                <% }else{  %>
                                    <option value="<%= category.id %>"><%= category.title %></option>
                                    <% } %> 
                                
                            <% }) %>
                        </select>

                        <button class="btn material__btn">Atualizar</button>
                    </form>
                </div>
            </div>
            
            <div id="content" style= 'display: none;'>
                <%- article.body %> 
            </div>
        </section>
    </main>

    <%- include('../../partials/scripts') %>
   <script src="/tinymce/js/tinymce/tinymce.min.js"></script>


   <script>

       tinymce.init({
        //    language:  'pt_BR',
           selector: "#article",
           plugins: [
             
               'advlist',
               'autolink', 
               'link', 
               'image', 
               'lists', 
               'print', 
               'preview', 
               'hr', 
               'searchreplace', 
               'wordcount', 
               'fullscreen', 
               'insertdatetime',
               'media', 
               'save', 
               'table', 
               'paste', 
               'emoticons'
           ], 
           init_instance_callback: () => {
               tinymce.get("article").setContent($('#content').html())
           }
           
       })
       
   </script>


    </body>
</html>